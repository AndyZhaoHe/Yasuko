function loadJS(A,e,t){var o=!!window.ActiveXObject,i=o&&!window.XMLHttpRequest,a=document.createElement("script"),r=i?document.documentElement:document.getElementsByTagName("head")[0];a.type="text/javascript",a.async=!0,a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(a.onreadystatechange=null,e&&e())}:a.onload=function(){e&&e()},a.src=A,t?document.getElementById(t).appendChild(a):r.insertBefore(a,r.firstChild)}$.fn.extend({isOnScreenVisible:function(){if(!$("body").hasClass("post-template"))return!1;var A=$(window),e={top:A.scrollTop(),left:A.scrollLeft()};e.right=e.left+A.width(),e.bottom=e.top+A.height();var t=this.offset();return t.right=t.left+this.outerWidth(),t.bottom=t.top+this.outerHeight(),!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}});var duoshuoQuery={short_name:"luolei"},GlobalConfigue={masterDomain:"https://luolei.org"},General={isMobile:!1,isWechat:!1,viewWidth:$(window).width(),absUrl:location.protocol+"//"+location.host,init:function(){var A=window,e=(A.document,navigator.userAgent.toLowerCase()),t=A.navigator.appVersion.match(/android/gi);A.navigator.appVersion.match(/iphone/gi);"micromessenger"==e.match(/MicroMessenger/i)&&(General.isWechat=!0,$("body").addClass("wechat-webview")),t&&(General.isMobile=!0),$("body").hasClass("post-template")&&(General.updateImageWidth(),General.rewardLoader()),General.webFontLoader(),General.scrollToPos(),General.arrowEvent()},updateImageWidth:function(){function A(){var A=$(this),e=t.outerWidth(),o=this.naturalWidth;o>=e?A.addClass("full-img"):A.removeClass("full-img")}function e(){o.each(A)}var t=$(".post-content"),o=$(".single-post-inner img").on("load",A);e()},webFontLoader:function(){WebFontConfig={loading:function(){},custom:{families:["Exo","iconfont"],urls:[General.absUrl+"/assets/css/font.min.css"]}},loadJS(General.absUrl+"/assets/js/webfont.js",function(){WebFont.load({custom:{families:["Exo","iconfont"]}})})},arrowEvent:function(){$(".arrow_down").click(function(){return $("html,body").animate({scrollTop:$(window).height()-20},600,function(){window.location.hash="#"}),!1})},scrollToPos:function(A){var e="我要飞到最高",t=(A||$(window).height(),$('<a href="#" id="to-top" title="'+e+'"> <div class="to-top-wrap"></div></a>').appendTo("body"));$(window).scroll(function(){$(window).scrollTop()>$(window).height()?t.fadeIn(500):t.fadeOut(500)}),t.click(function(A){A.preventDefault(),$("html,body").animate({scrollTop:0},666,function(){window.location.hash="#"})})},urlIconlize:function(A){var e,t,o="iconfont",i={twitter:o+"-twitter",qzone:o+"-qzone",weibo:o+"-weibo",facebook:o+"-facebook",github:o+"-github",douban:o+"-douban",google:o+"-google",luolei:o+"-luolei",dribble:o+"-dribble",v2ex:o+"-v2ex",zhihu:o+"-zhihu",wikipedia:o+"-wikipedia",jianshu:o+"-jianshu",youku:o+"-youku",youtube:o+"-youtube"};for(var a in i)if("function"!=typeof i[a]){var r=a;A.indexOf(r)>=0&&(e=r,t=i[r])}return t},addIcons:function(){$(".single-post-inner  a:not(:has(img))").each(function(A){var e=$(this).attr("href"),t=document.createElement("a");t.href=e,_selfDomain=t.hostname,General.urlIconlize(_selfDomain),$(this).prepend('<i class="iconfont '+General.urlIconlize(_selfDomain)+'"></i>');var o=$(this).find("i").css("color"),i=$(this).css("color");$(this).hover(function(){$(this).css("color",o),$(this).addClass("animated pulse")},function(){$(this).css("color",i),$(this).removeClass("animated pulse")})})},rewardLoader:function(){var A={alipay:"/assets/images/qr-alipay-256.png",wechat:"/assets/images/qr-wechat-256.png"};General.isWechat&&$(".wechat-code b").html("长按上方二维码打赏作者"),$(".money-like .reward-button").hover(function(){$("img.wechat-img").attr("src",A.wechat),$("img.alipay-img").attr("src",A.alipay),$(".money-code").fadeIn(),$(this).addClass("active")},function(){$(".money-code").fadeOut(),$(this).removeClass("active")},800),$(".money-like .reward-button").click(function(){$(this).hasClass("active")?($(this).find("img.wechat-img").attr("src",A.wechat),$(this).find("img.alipay-img").attr("src",A.alipay),$(".money-code").fadeOut(),$(this).removeClass("active")):($(".money-code").fadeIn(),$(this).addClass("active"))})},commentLoader:function(){var A="cyt1tJHSI",e="prod_213d23efd9c346f1d884951eff4a4efd";if(!$("body").hasClass("post-template"))return!1;var t=GlobalConfigue.masterDomain+location.pathname;$("#SOHUCS").attr("sid",t),$(window).scroll(function(){$(".author-image").isOnScreenVisible()&&loadJS("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:A,conf:e})})})}},ImageSmartLoader={isWebPSupported:!1,isImageCompressed:!1,init:function(){ImageSmartLoader.webPCheck()},isCompressedCheck:function(){},webPCheck:function(A,e){var t={demo:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="},o=new Image;o.onload=function(){o.width>0&&o.height>0;ImageSmartLoader.isWebPSupported=!0,ImageSmartLoader.webPLoader()},o.onerror=function(){ImageSmartLoader.isWebPSupported=!1,ImageSmartLoader.webPLoader()},o.src="data:image/webp;base64,"+t.demo},imgLoader:function(){},webPLoader:function(){if(1==ImageSmartLoader.isWebPSupported){if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1})}else{if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:1500}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!1})}}};$(document).ready(function(){var A=$(window);$.fn.lazyload=function(e){function t(){var A=0;i.each(function(){var e=$(this);if(!a.skip_invisible||e.is(":visible"))if($.abovethetop(this,a)||$.leftofbegin(this,a));else if($.belowthefold(this,a)||$.rightoffold(this,a)){if(++A>a.failure_limit)return!1}else e.trigger("appear"),A=0})}var o,i=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/gif;base64,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",advanced_load:!1,webP_load:!1,is_scale:!1,scale_width:750};return e&&(void 0!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),void 0!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),$.extend(a,e)),o=void 0===a.container||a.container===window?A:$(a.container),0===a.event.indexOf("scroll")&&o.bind(a.event,function(){return t()}),this.each(function(){var A=this,e=$(A);A.loaded=!1,void 0!==e.attr("src")&&e.attr("src")!==!1||e.is("img")&&(e.attr("src",a.placeholder),e.addClass("loading")),e.one("appear",function(){if(!this.loaded){if(a.appear){var t=i.length;a.appear.call(A,t,a)}var o=e.attr("data-"+a.data_attribute);(o.indexOf("upaiyun")>-1||o.indexOf("file.is26.com")>-1)&&(1==a.advanced_load&&(o+="!"),1==a.is_scale&&(o+="/fw/"+a.scale_width),1==a.webP_load&&(o+="/format/webp")),$("<img />").bind("load",function(){e.hide(),e.is("img")?e.attr("src",o):e.css("background-image","url('"+o+"')"),e[a.effect](a.effect_speed),A.loaded=!0;var t=$.grep(i,function(A){return!A.loaded});if(i=$(t),a.load){var r=i.length;a.load.call(A,r,a)}e.removeClass("loading")}).attr("src",o)}}),0!==a.event.indexOf("scroll")&&e.bind(a.event,function(){A.loaded||e.trigger("appear")})}),A.bind("resize",function(){t()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&A.bind("pageshow",function(A){A.originalEvent&&A.originalEvent.persisted&&i.each(function(){$(this).trigger("appear")})}),$(document).ready(function(){t()}),this},$.belowthefold=function(e,t){var o;return o=void 0===t.container||t.container===window?(window.innerHeight?window.innerHeight:A.height())+A.scrollTop():$(t.container).offset().top+$(t.container).height(),o<=$(e).offset().top-t.threshold},$.rightoffold=function(e,t){var o;return o=void 0===t.container||t.container===window?A.width()+A.scrollLeft():$(t.container).offset().left+$(t.container).width(),o<=$(e).offset().left-t.threshold},$.abovethetop=function(e,t){var o;return o=void 0===t.container||t.container===window?A.scrollTop():$(t.container).offset().top,o>=$(e).offset().top+t.threshold+$(e).height()},$.leftofbegin=function(e,t){var o;return o=void 0===t.container||t.container===window?A.scrollLeft():$(t.container).offset().left,o>=$(e).offset().left+t.threshold+$(e).width()},$.inviewport=function(A,e){return!($.rightoffold(A,e)||$.leftofbegin(A,e)||$.belowthefold(A,e)||$.abovethetop(A,e))},$.extend($.expr[":"],{"below-the-fold":function(A){return $.belowthefold(A,{threshold:0})},"above-the-top":function(A){return!$.belowthefold(A,{threshold:0})},"right-of-screen":function(A){return $.rightoffold(A,{threshold:0})},"left-of-screen":function(A){return!$.rightoffold(A,{threshold:0})},"in-viewport":function(A){return $.inviewport(A,{threshold:0})},"above-the-fold":function(A){return!$.belowthefold(A,{threshold:0})},"right-of-fold":function(A){return $.rightoffold(A,{threshold:0})},"left-of-fold":function(A){return!$.rightoffold(A,{threshold:0})}}),General.init(),ImageSmartLoader.init(),$("body").hasClass("post-template")&&(General.addIcons(),General.commentLoader())});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiXSwibmFtZXMiOlsibG9hZEpTIiwidXJsIiwiY2FsbGJhY2siLCJlbCIsImlzSUUiLCJ3aW5kb3ciLCJBY3RpdmVYT2JqZWN0IiwiaXNJRTYiLCJYTUxIdHRwUmVxdWVzdCIsInNjcmlwdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhlYWQiLCJkb2N1bWVudEVsZW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInR5cGUiLCJhc3luYyIsInJlYWR5U3RhdGUiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJvbmxvYWQiLCJzcmMiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsIiQiLCJmbiIsImV4dGVuZCIsImlzT25TY3JlZW5WaXNpYmxlIiwiaGFzQ2xhc3MiLCJ3aW4iLCJ2aWV3cG9ydCIsInRvcCIsInNjcm9sbFRvcCIsImxlZnQiLCJzY3JvbGxMZWZ0IiwicmlnaHQiLCJ3aWR0aCIsImJvdHRvbSIsImhlaWdodCIsImJvdW5kcyIsInRoaXMiLCJvZmZzZXQiLCJvdXRlcldpZHRoIiwib3V0ZXJIZWlnaHQiLCJkdW9zaHVvUXVlcnkiLCJzaG9ydF9uYW1lIiwiR2xvYmFsQ29uZmlndWUiLCJtYXN0ZXJEb21haW4iLCJHZW5lcmFsIiwiaXNNb2JpbGUiLCJpc1dlY2hhdCIsInZpZXdXaWR0aCIsImFic1VybCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJob3N0IiwiaW5pdCIsIlVBIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJpc0FuZHJvaWQiLCJhcHBWZXJzaW9uIiwibWF0Y2giLCJhZGRDbGFzcyIsInVwZGF0ZUltYWdlV2lkdGgiLCJyZXdhcmRMb2FkZXIiLCJ3ZWJGb250TG9hZGVyIiwic2Nyb2xsVG9Qb3MiLCJhcnJvd0V2ZW50IiwiJHRoaXMiLCJjb250ZW50V2lkdGgiLCIkcG9zdENvbnRlbnQiLCJpbWFnZVdpZHRoIiwibmF0dXJhbFdpZHRoIiwicmVtb3ZlQ2xhc3MiLCJjYXNwZXJGdWxsSW1nIiwiJGltZyIsImVhY2giLCJvbiIsIldlYkZvbnRDb25maWciLCJsb2FkaW5nIiwiY3VzdG9tIiwiZmFtaWxpZXMiLCJ1cmxzIiwiV2ViRm9udCIsImxvYWQiLCJjbGljayIsImFuaW1hdGUiLCJoYXNoIiwicG9zaXRpb24iLCJTVFJfVE9fVE9QIiwiYnV0dG9uIiwiYXBwZW5kVG8iLCJzY3JvbGwiLCJmYWRlSW4iLCJmYWRlT3V0IiwiZSIsInByZXZlbnREZWZhdWx0IiwidXJsSWNvbmxpemUiLCJkb21haW4iLCJfb3V0cHV0IiwiaWNvbkZvbnRUYWciLCJpY29uTWFwIiwidHdpdHRlciIsInF6b25lIiwid2VpYm8iLCJmYWNlYm9vayIsImdpdGh1YiIsImRvdWJhbiIsImdvb2dsZSIsImx1b2xlaSIsImRyaWJibGUiLCJ2MmV4IiwiemhpaHUiLCJ3aWtpcGVkaWEiLCJqaWFuc2h1IiwieW91a3UiLCJ5b3V0dWJlIiwibmFtZSIsIk1hcEtleSIsImluZGV4T2YiLCJhZGRJY29ucyIsImkiLCJfc3JjIiwiYXR0ciIsInRtcCIsImhyZWYiLCJfc2VsZkRvbWFpbiIsImhvc3RuYW1lIiwicHJlcGVuZCIsIl9zZWxmQ29sb3IiLCJmaW5kIiwiY3NzIiwiX29yaWdpbmFsQ29sb3IiLCJob3ZlciIsImxvYWRRUiIsImFsaXBheSIsIndlY2hhdCIsImh0bWwiLCJjb21tZW50TG9hZGVyIiwiYXBwaWQiLCJjb25mIiwiZGF0YVRocmVhZEtleSIsInBhdGhuYW1lIiwiY2hhbmd5YW4iLCJhcGkiLCJjb25maWciLCJJbWFnZVNtYXJ0TG9hZGVyIiwiaXNXZWJQU3VwcG9ydGVkIiwiaXNJbWFnZUNvbXByZXNzZWQiLCJ3ZWJQQ2hlY2siLCJpc0NvbXByZXNzZWRDaGVjayIsImZlYXR1cmUiLCJUZXN0SW1hZ2VzIiwiZGVtbyIsImltZyIsIkltYWdlIiwid2ViUExvYWRlciIsIm9uZXJyb3IiLCJpbWdMb2FkZXIiLCJsYXp5bG9hZCIsImFkdmFuY2VkX2xvYWQiLCJkYXRhX2F0dHJpYnV0ZSIsIndlYlBfbG9hZCIsImlzX3NjYWxlIiwic2NhbGVfd2lkdGgiLCJyZWFkeSIsIiR3aW5kb3ciLCJvcHRpb25zIiwidXBkYXRlIiwiY291bnRlciIsImVsZW1lbnRzIiwic2V0dGluZ3MiLCJza2lwX2ludmlzaWJsZSIsImlzIiwiYWJvdmV0aGV0b3AiLCJsZWZ0b2ZiZWdpbiIsImJlbG93dGhlZm9sZCIsInJpZ2h0b2Zmb2xkIiwiZmFpbHVyZV9saW1pdCIsInRyaWdnZXIiLCIkY29udGFpbmVyIiwidGhyZXNob2xkIiwiZXZlbnQiLCJlZmZlY3QiLCJjb250YWluZXIiLCJhcHBlYXIiLCJwbGFjZWhvbGRlciIsInVuZGVmaW5lZCIsImZhaWx1cmVsaW1pdCIsImVmZmVjdHNwZWVkIiwiZWZmZWN0X3NwZWVkIiwiYmluZCIsInNlbGYiLCIkc2VsZiIsImxvYWRlZCIsIm9uZSIsImVsZW1lbnRzX2xlZnQiLCJsZW5ndGgiLCJjYWxsIiwidXBkYXRlZFVybCIsImhpZGUiLCJ0ZW1wIiwiZ3JlcCIsImVsZW1lbnQiLCJ0ZXN0Iiwib3JpZ2luYWxFdmVudCIsInBlcnNpc3RlZCIsImZvbGQiLCJpbm5lckhlaWdodCIsImludmlld3BvcnQiLCJleHByIiwiYmVsb3ctdGhlLWZvbGQiLCJhIiwiYWJvdmUtdGhlLXRvcCIsInJpZ2h0LW9mLXNjcmVlbiIsImxlZnQtb2Ytc2NyZWVuIiwiaW4tdmlld3BvcnQiLCJhYm92ZS10aGUtZm9sZCIsInJpZ2h0LW9mLWZvbGQiLCJsZWZ0LW9mLWZvbGQiXSwibWFwcGluZ3MiOiJBQXVCQSxRQUFTQSxRQUFPQyxFQUFLQyxFQUFVQyxHQUMzQixHQUFJQyxLQUFTQyxPQUFPQyxjQUNoQkMsRUFBUUgsSUFBU0MsT0FBT0csZUFDeEJDLEVBQVNDLFNBQVNDLGNBQWMsVUFDaENDLEVBQU9MLEVBQVFHLFNBQVNHLGdCQUFrQkgsU0FBU0kscUJBQXFCLFFBQVEsRUFDcEZMLEdBQU9NLEtBQU8sa0JBQ2ROLEVBQU9PLE9BQVEsRUFDWFAs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QVNKLEdBQ3BCLE1BQU85TCxHQUFFMkwsV0FBV0csR0FDaEIvQixVQUFXLEtBSW5Cb0MsaUJBQWtCLFNBQVNMLEdBQ3ZCLE9BQVE5TCxFQUFFMEosYUFBYW9DLEdBQ25CL0IsVUFBVyxLQUduQnFDLGdCQUFpQixTQUFTTixHQUN0QixNQUFPOUwsR0FBRTJKLFlBQVltQyxHQUNqQi9CLFVBQVcsS0FHbkJzQyxlQUFnQixTQUFTUCxHQUNyQixPQUFROUwsRUFBRTJKLFlBQVltQyxHQUNsQi9CLFVBQVcsT0FLdkJ2SSxRQUFRUSxPQUNSNEYsaUJBQWlCNUYsT0FDYmhDLEVBQUUsUUFBUUksU0FBUyxtQkFDbkJvQixRQUFRMEUsV0FDUjFFLFFBQVE0RiIsImZpbGUiOiJkZXYubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJC5mbi5leHRlbmQoe1xuXG4gICAgaXNPblNjcmVlblZpc2libGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoISQoJ2JvZHknKS5oYXNDbGFzcygncG9zdC10ZW1wbGF0ZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdpbiA9ICQod2luZG93KTtcbiAgICAgICAgdmFyIHZpZXdwb3J0ID0ge1xuICAgICAgICAgICAgdG9wOiB3aW4uc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICBsZWZ0OiB3aW4uc2Nyb2xsTGVmdCgpXG4gICAgICAgIH07XG4gICAgICAgIHZpZXdwb3J0LnJpZ2h0ID0gdmlld3BvcnQubGVmdCArIHdpbi53aWR0aCgpO1xuICAgICAgICB2aWV3cG9ydC5ib3R0b20gPSB2aWV3cG9ydC50b3AgKyB3aW4uaGVpZ2h0KCk7XG5cbiAgICAgICAgdmFyIGJvdW5kcyA9IHRoaXMub2Zmc2V0KCk7XG4gICAgICAgIGJvdW5kcy5yaWdodCA9IGJvdW5kcy5sZWZ0ICsgdGhpcy5vdXRlcldpZHRoKCk7XG4gICAgICAgIGJvdW5kcy5ib3R0b20gPSBib3VuZHMudG9wICsgdGhpcy5vdXRlckhlaWdodCgpO1xuXG4gICAgICAgIHJldHVybiAoISh2aWV3cG9ydC5yaWdodCA8IGJvdW5kcy5sZWZ0IHx8IHZpZXdwb3J0LmxlZnQgPiBib3VuZHMucmlnaHQgfHwgdmlld3BvcnQuYm90dG9tIDwgYm91bmRzLnRvcCB8fCB2aWV3cG9ydC50b3AgPiBib3VuZHMuYm90dG9tKSk7XG4gICAgfSxcblxufSk7XG5cbmZ1bmN0aW9uIGxvYWRKUyh1cmwsIGNhbGxiYWNrLCBlbCkge1xuICAgIHZhciBpc0lFID0gISF3aW5kb3cuQWN0aXZlWE9iamVjdCxcbiAgICAgICAgaXNJRTYgPSBpc0lFICYmICF3aW5kb3cuWE1MSHR0cFJlcXVlc3QsXG4gICAgICAgIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksXG4gICAgICAgIGhlYWQgPSBpc0lFNiA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA6IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcbiAgICBzY3JpcHQudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XG4gICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgICBpZiAoc2NyaXB0LnJlYWR5U3RhdGUpIHtcbiAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHNjcmlwdC5yZWFkeVN0YXRlID09IFwibG9hZGVkXCIgfHwgc2NyaXB0LnJlYWR5U3RhdGUgPT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzY3JpcHQuc3JjID0gdXJsO1xuICAgIGlmIChlbCkge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbCkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBoZWFkLmluc2VydEJlZm9yZShzY3JpcHQsIGhlYWQuZmlyc3RDaGlsZCk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBZYXN1a28g6YWN572u5paH5Lu2XG4gKiDlpJror7Tor4TorrrosIPnlKjnrYlcbiAqL1xuXG52YXIgZHVvc2h1b1F1ZXJ5ID0ge1xuICAgIHNob3J0X25hbWU6IFwibHVvbGVpXCJcbn07XG5cbnZhciBHbG9iYWxDb25maWd1ZSA9IHtcbiAgICBtYXN0ZXJEb21haW46ICdodHRwczovL2x1b2xlaS5vcmcnLFxufVxuXG5cbnZhciBHZW5lcmFsID0ge1xuICAgIGlzTW9iaWxlOiBmYWxzZSxcbiAgICBpc1dlY2hhdDogZmFsc2UsXG4gICAgdmlld1dpZHRoOiAkKHdpbmRvdykud2lkdGgoKSxcbiAgICBhYnNVcmw6IGxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIGxvY2F0aW9uLmhvc3QsXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB3aW4gPSB3aW5kb3c7XG4gICAgICAgIHZhciBkb2MgPSB3aW4uZG9jdW1lbnQ7XG4gICAgICAgIHZhciBVQSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKVxuICAgICAgICB2YXIgaXNBbmRyb2lkID0gd2luLm5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9hbmRyb2lkL2dpKTtcbiAgICAgICAgdmFyIGlzSVBob25lID0gd2luLm5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9pcGhvbmUvZ2kpO1xuICAgICAgICBpZiAoVUEubWF0Y2goL01pY3JvTWVzc2VuZ2VyL2kpID09IFwibWljcm9tZXNzZW5nZXJcIikge1xuICAgICAgICAgICAgR2VuZXJhbC5pc1dlY2hhdCA9IHRydWU7XG4gICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3dlY2hhdC13ZWJ2aWV3JylcbiAgICAgICAgfVxuICAgICAgICBpZiAoISFpc0FuZHJvaWQpIHtcbiAgICAgICAgICAgIEdlbmVyYWwuaXNNb2JpbGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xuICAgICAgICAgICAgR2VuZXJhbC51cGRhdGVJbWFnZVdpZHRoKCk7XG4gICAgICAgICAgICBHZW5lcmFsLnJld2FyZExvYWRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgR2VuZXJhbC53ZWJGb250TG9hZGVyKCk7XG4gICAgICAgIEdlbmVyYWwuc2Nyb2xsVG9Qb3MoKTtcbiAgICAgICAgR2VuZXJhbC5hcnJvd0V2ZW50KCk7XG4gICAgfSxcbiAgICB1cGRhdGVJbWFnZVdpZHRoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyICRwb3N0Q29udGVudCA9ICQoXCIucG9zdC1jb250ZW50XCIpO1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUltYWdlV2lkdGgoKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRXaWR0aCA9ICRwb3N0Q29udGVudC5vdXRlcldpZHRoKCksIC8vIFdpZHRoIG9mIHRoZSBjb250ZW50XG4gICAgICAgICAgICAgICAgaW1hZ2VXaWR0aCA9IHRoaXMubmF0dXJhbFdpZHRoOyAvLyBPcmlnaW5hbCBpbWFnZSByZXNvbHV0aW9uXG5cbiAgICAgICAgICAgIGlmIChpbWFnZVdpZHRoID49IGNvbnRlbnRXaWR0aCkge1xuICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdmdWxsLWltZycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnZnVsbC1pbWcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciAkaW1nID0gJChcIi5zaW5nbGUtcG9zdC1pbm5lciBpbWdcIikub24oJ2xvYWQnLCB1cGRhdGVJbWFnZVdpZHRoKTtcblxuICAgICAgICBmdW5jdGlvbiBjYXNwZXJGdWxsSW1nKCkge1xuICAgICAgICAgICAgJGltZy5lYWNoKHVwZGF0ZUltYWdlV2lkdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzcGVyRnVsbEltZygpO1xuICAgIH0sXG4gICAgd2ViRm9udExvYWRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIFdlYkZvbnRDb25maWcgPSB7XG4gICAgICAgICAgICBsb2FkaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbG9hZGluZyBmb250JylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjdXN0b206IHtcbiAgICAgICAgICAgICAgICBmYW1pbGllczogWydFeG8nLCAnaWNvbmZvbnQnXSxcbiAgICAgICAgICAgICAgICB1cmxzOiBbR2VuZXJhbC5hYnNVcmwgKyAnL2Fzc2V0cy9jc3MvZm9udC5taW4uY3NzJ11cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbG9hZEpTKEdlbmVyYWwuYWJzVXJsICsgJy9hc3NldHMvanMvd2ViZm9udC5qcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgV2ViRm9udC5sb2FkKHtcbiAgICAgICAgICAgICAgICBjdXN0b206IHtcbiAgICAgICAgICAgICAgICAgICAgZmFtaWxpZXM6IFsnRXhvJywgJ2ljb25mb250J11cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcblxuXG5cbiAgICB9LFxuICAgIGFycm93RXZlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcuYXJyb3dfZG93bicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKHdpbmRvdykuaGVpZ2h0KCkgLSAyMFxuICAgICAgICAgICAgfSwgNjAwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KVxuICAgIH0sXG4gICAgLy/lubPmu5Hmu5rliqjliLDpobbpg6hcbiAgICBzY3JvbGxUb1BvczogZnVuY3Rpb24ocG9zaXRpb24pIHtcbiAgICAgICAgdmFyIFNUUl9UT19UT1AgPSAn5oiR6KaB6aOe5Yiw5pyA6auYJyxcbiAgICAgICAgICAgIGNvdmVySGVpZ2h0ID0gcG9zaXRpb24gfHwgJCh3aW5kb3cpLmhlaWdodCgpOyAvL+iOt+W+l+WbvueJh+mrmOW6plxuICAgICAgICB2YXIgYnV0dG9uID0gJCgnPGEgaHJlZj1cIiNcIiBpZD1cInRvLXRvcFwiIHRpdGxlPVwiJyArIFNUUl9UT19UT1AgKyAnXCI+IDxkaXYgY2xhc3M9XCJ0by10b3Atd3JhcFwiPjwvZGl2PjwvYT4nKS5hcHBlbmRUbygnYm9keScpO1xuICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+ICQod2luZG93KS5oZWlnaHQoKSkge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5mYWRlSW4oNTAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmZhZGVPdXQoNTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYnV0dG9uLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQoJ2h0bWwsYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogMFxuICAgICAgICAgICAgfSwgNjY2LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgIH0sXG4gICAgLyrnu5nmlofnq6DkuK3nmoR1cmzmt7vliqBpY29uZm9udOaWueS+v+ivhuWIqyovXG4gICAgdXJsSWNvbmxpemU6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICB2YXIgZG9tYWluLFxuICAgICAgICAgICAgX291dHB1dDtcbiAgICAgICAgdmFyIGljb25Gb250VGFnID0gJ2ljb25mb250JztcbiAgICAgICAgdmFyIGljb25NYXAgPSB7IC8q57Si5byVIOWPr+WcqOi/memHjOa3u+WKoOWMuemFjeinhOWImSovXG4gICAgICAgICAgICAndHdpdHRlcic6IGljb25Gb250VGFnICsgJy10d2l0dGVyJyxcbiAgICAgICAgICAgICdxem9uZSc6IGljb25Gb250VGFnICsgJy1xem9uZScsXG4gICAgICAgICAgICAnd2VpYm8nOiBpY29uRm9udFRhZyArICctd2VpYm8nLFxuICAgICAgICAgICAgJ2ZhY2Vib29rJzogaWNvbkZvbnRUYWcgKyAnLWZhY2Vib29rJyxcbiAgICAgICAgICAgICdnaXRodWInOiBpY29uRm9udFRhZyArICctZ2l0aHViJyxcbiAgICAgICAgICAgICdkb3ViYW4nOiBpY29uRm9udFRhZyArICctZG91YmFuJyxcbiAgICAgICAgICAgICdnb29nbGUnOiBpY29uRm9udFRhZyArICctZ29vZ2xlJyxcbiAgICAgICAgICAgICdsdW9sZWknOiBpY29uRm9udFRhZyArICctbHVvbGVpJyxcbiAgICAgICAgICAgICdkcmliYmxlJzogaWNvbkZvbnRUYWcgKyAnLWRyaWJibGUnLFxuICAgICAgICAgICAgJ3YyZXgnOiBpY29uRm9udFRhZyArICctdjJleCcsXG4gICAgICAgICAgICAnemhpaHUnOiBpY29uRm9udFRhZyArICctemhpaHUnLFxuICAgICAgICAgICAgJ3dpa2lwZWRpYSc6IGljb25Gb250VGFnICsgJy13aWtpcGVkaWEnLFxuICAgICAgICAgICAgJ2ppYW5zaHUnOiBpY29uRm9udFRhZyArICctamlhbnNodScsXG4gICAgICAgICAgICAneW91a3UnOiBpY29uRm9udFRhZyArICcteW91a3UnLFxuICAgICAgICAgICAgJ3lvdXR1YmUnOiBpY29uRm9udFRhZyArICcteW91dHViZSdcblxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBpY29uTWFwKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGljb25NYXBbbmFtZV0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgTWFwS2V5ID0gbmFtZTtcbiAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoTWFwS2V5KSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbWFpbiA9IE1hcEtleTtcbiAgICAgICAgICAgICAgICAgICAgX291dHB1dCA9IGljb25NYXBbTWFwS2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX291dHB1dDtcbiAgICB9LFxuICAgIGFkZEljb25zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLyrnu5nljZrlrqLmlofnq6DlnLDlnYB1cmzmt7vliqBpY2/or4bliKsqL1xuICAgICAgICAkKCcuc2luZ2xlLXBvc3QtaW5uZXIgIGE6bm90KDpoYXMoaW1nKSknKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgIHZhciBfc3JjID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgICB2YXIgdG1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgdG1wLmhyZWYgPSBfc3JjO1xuICAgICAgICAgICAgX3NlbGZEb21haW4gPSB0bXAuaG9zdG5hbWU7XG4gICAgICAgICAgICBHZW5lcmFsLnVybEljb25saXplKF9zZWxmRG9tYWluKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKF9zZWxmRG9tYWluKTtcbiAgICAgICAgICAgICQodGhpcykucHJlcGVuZCgnPGkgY2xhc3M9XCJpY29uZm9udCAnICsgR2VuZXJhbC51cmxJY29ubGl6ZShfc2VsZkRvbWFpbikgKyAnXCI+PC9pPicpO1xuICAgICAgICAgICAgdmFyIF9zZWxmQ29sb3IgPSAkKHRoaXMpLmZpbmQoJ2knKS5jc3MoJ2NvbG9yJyksXG4gICAgICAgICAgICAgICAgX29yaWdpbmFsQ29sb3IgPSAkKHRoaXMpLmNzcygnY29sb3InKTtcblxuICAgICAgICAgICAgLyrpvKDmoIfmgqzmta7ml7YqL1xuICAgICAgICAgICAgJCh0aGlzKS5ob3ZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnY29sb3InLCBfc2VsZkNvbG9yKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhbmltYXRlZCBwdWxzZScpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2NvbG9yJywgX29yaWdpbmFsQ29sb3IpO1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHB1bHNlJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8v5omT6LWPXG4gICAgcmV3YXJkTG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxvYWRRUiA9IHtcbiAgICAgICAgICAgIGFsaXBheTogJy9hc3NldHMvaW1hZ2VzL3FyLWFsaXBheS0yNTYucG5nJyxcbiAgICAgICAgICAgIHdlY2hhdDogJy9hc3NldHMvaW1hZ2VzL3FyLXdlY2hhdC0yNTYucG5nJ1xuICAgICAgICB9XG4gICAgICAgIHZhciBsb2FkUVJVcmw7XG4gICAgICAgIGlmICghIUdlbmVyYWwuaXNXZWNoYXQpIHtcbiAgICAgICAgICAgICQoJy53ZWNoYXQtY29kZSBiJykuaHRtbCgn6ZW/5oyJ5LiK5pa55LqM57u056CB5omT6LWP5L2c6ICFJyk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcubW9uZXktbGlrZSAucmV3YXJkLWJ1dHRvbicpLmhvdmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+aCrOa1ricpXG4gICAgICAgICAgICAkKCdpbWcud2VjaGF0LWltZycpLmF0dHIoJ3NyYycsIGxvYWRRUi53ZWNoYXQpO1xuICAgICAgICAgICAgJCgnaW1nLmFsaXBheS1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIuYWxpcGF5KTtcbiAgICAgICAgICAgICQoJy5tb25leS1jb2RlJykuZmFkZUluKCk7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcubW9uZXktY29kZScpLmZhZGVPdXQoKTtcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9LCA4MDApXG5cbiAgICAgICAgJCgnLm1vbmV5LWxpa2UgLnJld2FyZC1idXR0b24nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnaW1nLndlY2hhdC1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIud2VjaGF0KTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2ltZy5hbGlwYXktaW1nJykuYXR0cignc3JjJywgbG9hZFFSLmFsaXBheSk7XG4gICAgICAgICAgICAgICAgJCgnLm1vbmV5LWNvZGUnKS5mYWRlT3V0KCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLm1vbmV5LWNvZGUnKS5mYWRlSW4oKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuXG4gICAgfSxcbiAgICBjb21tZW50TG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFwcGlkID0gJ2N5dDF0SkhTSSc7XG4gICAgICAgIHZhciBjb25mID0gJ3Byb2RfMjEzZDIzZWZkOWMzNDZmMWQ4ODQ5NTFlZmY0YTRlZmQnO1xuXG4gICAgICAgIGlmICghJCgnYm9keScpLmhhc0NsYXNzKCdwb3N0LXRlbXBsYXRlJykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyDov5nph4zorr7nva7or4Torrrnu4Tku7bnmoR0aHJlYWRJZFxuICAgICAgICB2YXIgZGF0YVRocmVhZEtleSA9IEdsb2JhbENvbmZpZ3VlLm1hc3RlckRvbWFpbiArIGxvY2F0aW9uLnBhdGhuYW1lO1xuICAgICAgICAkKCcjU09IVUNTJykuYXR0cignc2lkJywgZGF0YVRocmVhZEtleSlcblxuICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCQoJy5hdXRob3ItaW1hZ2UnKS5pc09uU2NyZWVuVmlzaWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgKEdlbmVyYWwudmlld1dpZHRoID4gOTYwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRKUygnaHR0cHM6Ly9jaGFuZ3lhbi5zb2h1LmNvbS91cGxvYWQvY2hhbmd5YW4uanMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jaGFuZ3lhbi5hcGkuY29uZmlnKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBpZDogYXBwaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZjogY29uZlxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICB9IFxuICAgICAgICB9KTtcbiAgICB9XG59XG5cblxuXG52YXIgSW1hZ2VTbWFydExvYWRlciA9IHtcbiAgICBpc1dlYlBTdXBwb3J0ZWQ6IGZhbHNlLFxuICAgIGlzSW1hZ2VDb21wcmVzc2VkOiBmYWxzZSxcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgSW1hZ2VTbWFydExvYWRlci53ZWJQQ2hlY2soKTtcbiAgICB9LFxuICAgIGlzQ29tcHJlc3NlZENoZWNrOiBmdW5jdGlvbigpIHtcblxuICAgIH0sXG4gICAgd2ViUENoZWNrOiBmdW5jdGlvbihmZWF0dXJlLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgVGVzdEltYWdlcyA9IHtcbiAgICAgICAgICAgIGRlbW86IFwiVWtsR1Jrb0FBQUJYUlVKUVZsQTRXQW9BQUFBUUFBQUFBQUFBQUFBQVFVeFFTQXNBQUFBQkJ4QVJFWWlJL2djQUFBQldVRGdnR0FBQUFEQUJBSjBCS2dFQUFRQUJBQndscEFBRGNBRCsvZ2JRQUE9PVwiXG4gICAgICAgIH07XG4gICAgICAgIGNvbnNvbGUubG9nKCfmlK/mjIFXZWJw5ZOmJyk7XG4gICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IChpbWcud2lkdGggPiAwKSAmJiAoaW1nLmhlaWdodCA+IDApO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+aUr+aMgVdlYnAnKTtcbiAgICAgICAgICAgIC8vIGFsZXJ0KCfmlK/mjIEnKVxuICAgICAgICAgICAgSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgSW1hZ2VTbWFydExvYWRlci53ZWJQTG9hZGVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5LiN5pSv5oyBV2VicCcpO1xuICAgICAgICAgICAgSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIud2ViUExvYWRlcigpO1xuICAgICAgICB9O1xuICAgICAgICBpbWcuc3JjID0gXCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFwiICsgVGVzdEltYWdlc1snZGVtbyddO1xuXG4gICAgfSxcbiAgICBpbWdMb2FkZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZygn5Yqg6L296buY6K6k5Zu+54mHJyk7XG4gICAgfSxcbiAgICB3ZWJQTG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+WKoOi9vXdlYlAnKTtcbiAgICAgICAgLy8gYWxlcnQoSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQpO1xuICAgICAgICBpZiAoSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+WuveW6puaYrycgKyBHZW5lcmFsLnZpZXdXaWR0aCk7XG4gICAgICAgICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPT0gNzY4KSB7XG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChHZW5lcmFsLnZpZXdXaWR0aCA8IDc2OCkge1xuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVfd2lkdGg6IDc1MFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBhbGVydCgn5pmu6YCa5pSv5oyBJylcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChHZW5lcmFsLnZpZXdXaWR0aCA9PSA3NjgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZV93aWR0aDogMTUwMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChHZW5lcmFsLnZpZXdXaWR0aCA8IDc2OCkge1xuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlX3dpZHRoOiA3NTBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoJ+aZrumAmuaUr+aMgScpXG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfSxcblxuXG59XG5cblxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICB2YXIgJHdpbmRvdyA9ICQod2luZG93KTtcblxuICAgICQuZm4ubGF6eWxvYWQgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXM7XG4gICAgICAgIHZhciAkY29udGFpbmVyO1xuICAgICAgICB2YXIgc2V0dGluZ3MgPSB7XG4gICAgICAgICAgICB0aHJlc2hvbGQ6IDAsXG4gICAgICAgICAgICBmYWlsdXJlX2xpbWl0OiAwLFxuICAgICAgICAgICAgZXZlbnQ6IFwic2Nyb2xsXCIsXG4gICAgICAgICAgICBlZmZlY3Q6IFwic2hvd1wiLFxuICAgICAgICAgICAgY29udGFpbmVyOiB3aW5kb3csXG4gICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogXCJvcmlnaW5hbFwiLFxuICAgICAgICAgICAgc2tpcF9pbnZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgYXBwZWFyOiBudWxsLFxuICAgICAgICAgICAgbG9hZDogbnVsbCxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaGJnQUtBSUFBQVAvLy8vLy8veUgvQzA1RlZGTkRRVkJGTWk0d0F3RUFBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBQUFDSUl5UHFjdnRENk9jdE5xTHM5NjgrdytHNGtpVzVvbW02c3EyN2d2SDhsVUFBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFRK2NNbEpxNzA0NjgyNy8yQW9qbVNKR2NoQkpHYnJ2aHNDekljQTMzaDd6SE9RLzBBUGdYY29CSS9JU2dLd0l5aVNVS1FnVUhoR3I5aXNkc3Q5UlFBQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRDV3eVVtcnZUanJ6YnYvWUNpT1pHbGFCbklReWVtKzhJVUE5Q0hFZUU0ZU5CM293T0NHMERzVWhNaWtKQUhnRVJUS2FGQVFLRUNsMkt4Mnk5MUdBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVBuREpTYXU5T092TnUvOWdLSTVrYVpZR2NoREo2Yjd3aFFEMEljUjRUaDQwSGVqQTRJYlFPeFNFeUtRa0FlQVJGTXBvVUJBb1FLWFlySGJMalVVQUFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVErY01sSnE3MDQ2ODI3LzJBb2ptUnBucGlCSEVTQ3ZuQThJVUI5Q0hLdWgwZGRCN3VnRUVQd0hRckRaRElCNkJFVXltaFFFQ2hBcGRpc2Rzc05SUUFBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJENXd5VW1ydlRqcnpidi9ZQ2lPWkdtZW5ZRWNSSUsrY0R3aFFIMEljcTZIUjEwSHU2QVFRL0FkQ3NOa01nSG9FUlRLYUZBUUtFQ2wyS3gyeStWRUFBQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFVVhESlNhdTlPT3ZOdS85Z0tJNWt1U1RFZ1JobWk2RXE2NVlDWUFQSXJDLzFuZStpd0FFd1BBQmRBYUxOZUFRVmJnQkMwL1JVU3FjZVJZcVl3SklNMjBQWDIxRVVBZ0l5eVl4V3U5L3d1SHdhQVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVVM0RKU2F1OU9Pdk51LzlnS0k1a1dTYkVnUmptWmlBSGtiVDBLQUE0Z05RWWtoOENucEFUT0FDTWgyRWxod3NvbjVZQ2t3Q1ZFSTdIUW5XclNCMW4xVVNPb05oeUM0R2dXUkJJbE0zd3VIeE9oMGNBQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUlFjTWxKcTcwNDY4MjcvMkFvam1ScGVnbHhJTWFZcnUwcHo1Y0EzQUFpMnJoTy83VEFBVEE4aUFMRW14SElOQlZ3QUlMb21aUTJyeUtGaXBnUUdiYUhMbmI4VVJRQ0FwSVpUVzY3My9DNE93SUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkZWd3lVbXJ2VGpyemJ2L1lDaU9aR21lUzBJY2lKRVp5RUVrYUcxL0FxQURTSWJzQjhGdFNLd0VEZ0RrSWJQVEJZclFZYUZKeUJDU3lVSjBpMUtza2pSTVlrZFFjTThsUlNFZzFBZ0NDVE42VHEvYjc2WUlBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFSU2NNbEpxNzA0NjgyNy8yQW9qbVJwbmxaQ0hJaFJxYXlMenJRb0FEaUFVSGUrMThCZ0puQUFGQStVZ0JHSEZEcWZoUnlBUUlrdXFjOHNVTEV5SmlpRzd1R3JMYzhVaFlEQWdsYWIzL0M0Zkg2S0FBQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFYVhESlNhdTlPT3ZOdS85Z0tJNmtseEFIWXBTc1ppQUhrVlJ2UExlY0FPd0FndjhVQk84Z0NBNkxRRXpnQUdBZWtrRGVMa0JoOHFoUVMwRkt5T0lJeldhQkF0NGR4bDZLQXRXOHBVa0pIa0ZCaVRQbmIzVWhnTXlUQkFFSmRCV0FCWU4raUltS2k0eHZFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVkzREpTYXU5T092TnUvOWdLSTVrMlNYRWdSZ21oNm9zOWE1dGpRbEFEaUQycmU4VW5JN1hLeTRDQjBEeVlLd0VsRG5tNUpsVU5udUZIK0U2eVVLMzNTZ0F6RFVwVXNwRWVXRkFIOVNUOWhLK0xpa0tBVUY5Y2M5YitucDdnb09FaFlaRkVRQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFYVhESlNhdTlPT3ZOdS85Z0tJNWthVm9KY1NER2FDQUhrVlJ2UEorNEtRQThnSXlJM2tGQUNmS0d1YVFvY0FBMEQ2TWVMMEJwOXFqS2JLY2dKWXdJVG1lQkFqNk90ZWlNUXVXOGhSSTlnb0lDYjhyVCtJdWlFQ0NTQkFFSmN4V0FCWU41aUltS2k0eUxFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVpIREpTYXU5T092TnUvOWdLSTVrYVlJSmNTQ0dscTR0OWJKbmJWOENvQU5JbHUrOXlVOFh2QmxyZ1FOQWVjZ0VscnJtNUtsY0hxK213ZzVBeUdpaDNjbFhHY2FhUVFyVk1wRXhxQS9zaVpzWlA5czdpa0pBc01udkxYNThkNE9FaFlhSFp4RUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkdsd3lVbXJ2VGpyemJ2L1lDaU9aR21XQ1hFZ1JtVWdCNUc0c0h6ZU9DY0FQSUJVaU41QlFBbnlocm1rVWhJNEFKeUhTbzhYb0RoNzFhWDJWSmdTS29UbnMwQUpIOG5iOUVpaGVzNG9pUjVCQVJmUDFmaVFvaEFnV2dRQkNYUVZnQVdEZVlpSmlvdU1OeEVBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJITnd5VW1ydlRqcnpidi9ZQ2lPcEdhVXFJa2NSR0lseElHY0ZDelRhWVhrUElVQXdJT0FJZ0FDZDVPaUVkbVRISm85SXpCQUNVaWZFNnNSQ3lWQWVRVEFRVnlnRk1aajc2UWdGcXVocm04cVlTUW9LSXFZT0M0eDZBRjhjb0lsQWdFSmR4VUtCUUZEaVl1Tmc1R1NrNVNWbGhRUkFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVNBY01sSnE3MDQ2ODI3LzJBb2ptUlpKY1NCR0NhSHFpeGxJQWVSVkhOOXQ2VUEvQUFFTCtNRENpa0k0RUdBVkRLSG9zQUJNRDFBTHdIcXowb0IvZ0tVS1JCOEJSVzhoSExsckUxVENOcEQ0YTJjcXoyS0ZIVjNYeGowQjN3U0NVQUVDaFNFVTRaOWVBVUJUNHdMQ282UUZBSUJDWWNWbHdXYWtaK2dvYUtqb0JFQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCSDF3eVVtcnZUanJ6YnYvWUNpT1pFa214SUVZbzRFY1JHS2hLa3ZScTZsN0F1QURpQkhpZHhCUWVyL2dCT2xUN3A2WXdBRXdQWXgrdmdBbGdMVk91RVNvMkZMQUVrWUVLclZBS1ZRQjUwbTVHaC9iRlNtcVRKVDRFUlFVZUZWN0VnWjVBSVIyWXdvRkFVWWtBZ0VKZ0JXTWpoYVdqNHFibkoyZW42QWhFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWdIREpTYXU5T092TnUvOWdLSTVrYVdJSmNTQ0dscTR0WlNBSGtWUnpmWjk4S1FCQUFDTHpDdzRwaU9CQmdGUXllMUJRNEFDZ0hqS0JLdkJLQ1FJREZHb1FIQzF6Q2w1Q0JxMVZVd2phUStHdG5KdnZHSVdxdXJzWTlnZDlFZ2xCQkFvVWhGU0dlSXdXQ2dVQlR4bVBrUmNDQVFtSEZaY0ZtbzJmb0tHaW81OFJBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFSL2NNbEpxNzA0NjgyNy8yQW9qbVJwZGdseElFWmxJQWVSV09uYVVqVjc3dndpQUVBQW9vSUlIZ1NVWDNBNFVRS1p2YWdvY0FCVUQ1VWdNRUFKYUxFVHIxRktCaFcwaEFyQmFpMVFDbGRBZW5LK3pzdDRqVUpsbmVHQ0JBb1VlMWQrRWdaOEFJWjVqQllLQlFGSUZnSUJDWUlWajVHT2tKS05ucCtnb2FKU0VRQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFZ0hESlNhdTlPT3ZOdS85Z0tJNWthWFlHY2hDSmxSQUhZbFRwMm1adlBKOThpUURBZzRBaUFBSVJsVjl3ZUNrYWtiMW82R0FFQkNpQjZxRlN0V0t5eHExMDNDR0VDNVFDbFVxb21OZm9peHJBSnRzMUNUcUFvS0FZWUhRM0UzbEFmQmdLZ0FlQ2Q0eEVBUVY5RlFvRkFVd1ZBZ0VKa1llVWxvMmZvS0dpbzJNUkFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVI4Y01sSnE3MDQ2ODI3LzJBb2ptUnBlZ2x4SUVabElBZVJXT25haWpWNzdwd0EvQUJFQlFFOENDZytvRENVL0MxNVVFdmdBS0FlS3NCZmdCTElYa1BkWW5STUtXUUpGVUsxV2loYkFlaVEyUm9uanhXcTZveVNBQklVRkhoV2V5QUdlUUNFZGxFS0JRRkhGZ0lCQ1lBVmpJNGtsbytLbTV5ZG5wK0tFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWZIREpTYXU5T092TnUvOWdLSTVrYVhvR2NoQ0psUkFIWWxUcDJwN2FlK0FuQXZ3SEFVWHcreUVxUHFDUVp5SCttS1ZERVJDZ0JLWTd5cFFLclZ5ZlhSR2hlQ2hRQ2xJcG9USk9tOE1TTkNBTC95VG1BSUtDWW9ETmJ4TjNQM3AxQ3dwK2hTQUNBUVY3RlFvRkFVc1Zpd21PaFpCVmladWNuWjZmRmhFQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCR3R3eVVtcnZUanJ6YnYvWUNpT1pHbCtDWEVnUm1VZ0I1Rlk2ZHFlZUs0SlFBOGdGWVR2SUtEd2ZFQ2RjcmtJSEFEUFE4WFhDMUFDVkNsemV5cFFDUlVDRkZxZ0ZLSUFNSGM5VXFpZ00wckNSMUJRM05FNGUvOVJGQUpGRmdJQkNYWVZmb0I4aW91TWpZNXJFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWEzREpTYXU5T092TnUvOWdLSTVrYVg0R2NoQ0psUkFIWW1odlBKOTRiaUZBZndnVVFhK0h5QWlIUloweWR4Z0NBcFNBODVDUkRxbkxiSWx3TFZBS3pTWWhVd0NFeDlwMEtHRUdFQlFVQTh6Y3dzaWJnTHA2M3hFRUNuQVZDZ1VCUUJxRGhYeUtpNHlOam5zUkFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVJwY01sSnE3MDQ2ODI3LzJBb2ptUnBnZ2x4SUVabElBZVJrT25hbm5ncEFEeUFWSWplUVNEYTlYNjVaQ2h3QURRUGxSNHZJQXBJb2Nwc3B5QWxWQWhPWjBGVWVBSzgyblJHb1hMT0tJa2VRU0ZpUDkvcWZFVlJDQkF0QWdFSmRDTjhmbnFJaVlxTGpGb1JBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFScmNNbEpxNzA0NjgyNy8yQW9qbVJwZ2daeUVJbVZFQWRpbk5zYnozUmVJVUIvQ0JSQnI0ZlFYWVREb3RGNEdBSUNsSUR6c0t4SWg5UnFqb0F0VUFyTkprRTdLUURDWS9JcGNRWVFGQlFEN054U3k1dUF1dG9rQ0JUZ0ZRb0ZBVUI3QzRLRWhvcUxqSTJPR0JFQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRlZ3eVVtcnZUanJ6YnYvWUNpT1pHbUdDWEVnUm1VZ0I1R2NkRzBLUUE0Z0ZhSWZBcHR3eUFrY0FNZERSWmNMRUovUVNZRkpxQkNReUVKME8xU29rRE5LUWtkUWNNODFSU0VRdEFnQ0NUTjZUcS9iNzlzSUFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVJRY01sSnE3MDQ2ODI3LzJBb2ptUnBoZ1p5RUltV3J1MHB6eUVDM0llUTJiaE8vOERMNFhZTFpJWkVZM0FaSkJBUGhZd1RGMlZhWnduQWtLRElGSkRjcS9na0NCUzZtbklDUFc2NzMvRDROUUlBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJGTnd5VW1ydlRqcnpidi9ZQ2lPWkdtS0NYRWd4bWdnQjVHY2RJMEpRQTRnSTZJZkFwdlFGamdBakllUkxoY1lPazJGSldGRU9CNEx6NnhJb1RyT1VEcUNRa3YrS0FxQklFa1FTSXpMOExoOFRuOUdBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVVIREpTYXU5T092TnUvOWdLSTVrYVlvR2NoREp1YVZyNjg0Z0F0eUhRRjgycnUvQXpPRjJDd1FwUTZMeHlKd1FpSWRDYy9IRVNhZk1CR0JJVUV3THlTNjJLUWdVdk5oeUFqMXV1OS93T0NZQ0FDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVErY01sSnE3MDQ2ODI3LzJBb2ptUnBqZ2x4SU1icHZyQWxBRFNBeEhoT0JnZlFIN3FnY0ZPb0FRakRwRktpVVBrU3k2aFFVUWdJcE5pc2Rzc05SZ0FBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJENXd5VW1ydlRqcnpidi9ZQ2lPWkdtZVMwSWNpSUcrY0N3SlFBMGdjcTZId1FINGg1MXdpQ25ZQUFTaVVxbFkvUkxMcUZCUkNBaWsyS3gyeTRWRkFBQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFUG5ESlNhdTlPT3ZOdS85Z0tJNWthWjViUWh5SWdiNXdMQWxBRFNCeXJvZkJBZmlIblhDSUtkZ0FCS0pTcVZqOUVzdW9VRkVJQ0tUWXJIYkxCVVVBQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUStjTWxKcTcwNDY4MjcvMkFvam1ScG5xaVVFQWRpcEhBTUMwQU5JSEt1aDhFQitJZWRjSWdwMkFBRW9sS3BZUDBTeTZoUVVRZ0lwTmlzZHN0ZFJBQUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkQxd3lVbXJ2VGpyemJ2L1lDaU9aR21lcUprUUIyS2tjQXdMUUEwZ2NxNkh3UUg0aDUxd2lDbllBQVNpVXFsZy9STExxRkJSQ0FpazJLeDJpNG9BQURzPVwiLFxuICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogZmFsc2UsXG4gICAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNfc2NhbGU6IGZhbHNlLFxuICAgICAgICAgICAgc2NhbGVfd2lkdGg6IDc1MFxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBjb3VudGVyID0gMDtcblxuICAgICAgICAgICAgZWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNraXBfaW52aXNpYmxlICYmICEkdGhpcy5pcyhcIjp2aXNpYmxlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCQuYWJvdmV0aGV0b3AodGhpcywgc2V0dGluZ3MpIHx8XG4gICAgICAgICAgICAgICAgICAgICQubGVmdG9mYmVnaW4odGhpcywgc2V0dGluZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qIE5vdGhpbmcuICovXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghJC5iZWxvd3RoZWZvbGQodGhpcywgc2V0dGluZ3MpICYmXG4gICAgICAgICAgICAgICAgICAgICEkLnJpZ2h0b2Zmb2xkKHRoaXMsIHNldHRpbmdzKSkge1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy50cmlnZ2VyKFwiYXBwZWFyXCIpO1xuICAgICAgICAgICAgICAgICAgICAvKiBpZiB3ZSBmb3VuZCBhbiBpbWFnZSB3ZSdsbCBsb2FkLCByZXNldCB0aGUgY291bnRlciAqL1xuICAgICAgICAgICAgICAgICAgICBjb3VudGVyID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKytjb3VudGVyID4gc2V0dGluZ3MuZmFpbHVyZV9saW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICAvKiBNYWludGFpbiBCQyBmb3IgYSBjb3VwbGUgb2YgdmVyc2lvbnMuICovXG4gICAgICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLmZhaWx1cmVsaW1pdCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZmFpbHVyZV9saW1pdCA9IG9wdGlvbnMuZmFpbHVyZWxpbWl0O1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmZhaWx1cmVsaW1pdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZWZmZWN0c3BlZWQpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmVmZmVjdF9zcGVlZCA9IG9wdGlvbnMuZWZmZWN0c3BlZWQ7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZWZmZWN0c3BlZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQuZXh0ZW5kKHNldHRpbmdzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIENhY2hlIGNvbnRhaW5lciBhcyBqUXVlcnkgYXMgb2JqZWN0LiAqL1xuICAgICAgICAkY29udGFpbmVyID0gKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykgPyAkd2luZG93IDogJChzZXR0aW5ncy5jb250YWluZXIpO1xuXG4gICAgICAgIC8qIEZpcmUgb25lIHNjcm9sbCBldmVudCBwZXIgc2Nyb2xsLiBOb3Qgb25lIHNjcm9sbCBldmVudCBwZXIgaW1hZ2UuICovXG4gICAgICAgIGlmICgwID09PSBzZXR0aW5ncy5ldmVudC5pbmRleE9mKFwic2Nyb2xsXCIpKSB7XG4gICAgICAgICAgICAkY29udGFpbmVyLmJpbmQoc2V0dGluZ3MuZXZlbnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgdmFyICRzZWxmID0gJChzZWxmKTtcblxuICAgICAgICAgICAgc2VsZi5sb2FkZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgLyogSWYgbm8gc3JjIGF0dHJpYnV0ZSBnaXZlbiB1c2UgZGF0YTp1cmkuICovXG4gICAgICAgICAgICBpZiAoJHNlbGYuYXR0cihcInNyY1wiKSA9PT0gdW5kZWZpbmVkIHx8ICRzZWxmLmF0dHIoXCJzcmNcIikgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRzZWxmLmlzKFwiaW1nXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICRzZWxmLmF0dHIoXCJzcmNcIiwgc2V0dGluZ3MucGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICAkc2VsZi5hZGRDbGFzcyhcImxvYWRpbmdcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBXaGVuIGFwcGVhciBpcyB0cmlnZ2VyZWQgbG9hZCBvcmlnaW5hbCBpbWFnZS4gKi9cblxuICAgICAgICAgICAgJHNlbGYub25lKFwiYXBwZWFyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5sb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmFwcGVhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzX2xlZnQgPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5hcHBlYXIuY2FsbChzZWxmLCBlbGVtZW50c19sZWZ0LCBzZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZWRVcmwgPSAkc2VsZi5hdHRyKFwiZGF0YS1cIiArIHNldHRpbmdzLmRhdGFfYXR0cmlidXRlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+WbvueJh+WcsOWdgCcgK3VwZGF0ZWRVcmwuaW5kZXhPZigndXBhaXl1bicpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0NETuWcsOWdgCcgK3VwZGF0ZWRVcmwuaW5kZXhPZignZmlsZS5pczI2LmNvbScpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRVcmwuaW5kZXhPZigndXBhaXl1bicpID4gLTEgfHwgdXBkYXRlZFVybC5pbmRleE9mKCdmaWxlLmlzMjYuY29tJykgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQoMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5hZHZhbmNlZF9sb2FkID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsICs9ICchJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5pc19zY2FsZSA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFVybCArPSAnL2Z3LycgKyBzZXR0aW5ncy5zY2FsZV93aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy53ZWJQX2xvYWQgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRVcmwgKz0gJy9mb3JtYXQvd2VicCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh1cGRhdGVkVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIjxpbWcgLz5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5iaW5kKFwibG9hZFwiLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLmhpZGUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2VsZi5pcyhcImltZ1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5hdHRyKFwic3JjXCIsIHVwZGF0ZWRVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIiwgXCJ1cmwoJ1wiICsgdXBkYXRlZFVybCArIFwiJylcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmW3NldHRpbmdzLmVmZmVjdF0oc2V0dGluZ3MuZWZmZWN0X3NwZWVkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJlbW92ZSBpbWFnZSBmcm9tIGFycmF5IHNvIGl0IGlzIG5vdCBsb29wZWQgbmV4dCB0aW1lLiAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gJC5ncmVwKGVsZW1lbnRzLCBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhZWxlbWVudC5sb2FkZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMgPSAkKHRlbXApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzX2xlZnQgPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmxvYWQuY2FsbChzZWxmLCBlbGVtZW50c19sZWZ0LCBzZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLnJlbW92ZUNsYXNzKFwibG9hZGluZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInNyY1wiLCB1cGRhdGVkVXJsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLyogV2hlbiB3YW50ZWQgZXZlbnQgaXMgdHJpZ2dlcmVkIGxvYWQgb3JpZ2luYWwgaW1hZ2UgKi9cbiAgICAgICAgICAgIC8qIGJ5IHRyaWdnZXJpbmcgYXBwZWFyLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoMCAhPT0gc2V0dGluZ3MuZXZlbnQuaW5kZXhPZihcInNjcm9sbFwiKSkge1xuICAgICAgICAgICAgICAgICRzZWxmLmJpbmQoc2V0dGluZ3MuZXZlbnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYubG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi50cmlnZ2VyKFwiYXBwZWFyXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qIENoZWNrIGlmIHNvbWV0aGluZyBhcHBlYXJzIHdoZW4gd2luZG93IGlzIHJlc2l6ZWQuICovXG4gICAgICAgICR3aW5kb3cuYmluZChcInJlc2l6ZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKiBXaXRoIElPUzUgZm9yY2UgbG9hZGluZyBpbWFnZXMgd2hlbiBuYXZpZ2F0aW5nIHdpdGggYmFjayBidXR0b24uICovXG4gICAgICAgIC8qIE5vbiBvcHRpbWFsIHdvcmthcm91bmQuICovXG4gICAgICAgIGlmICgoLyg/OmlwaG9uZXxpcG9kfGlwYWQpLipvcyA1L2dpKS50ZXN0KG5hdmlnYXRvci5hcHBWZXJzaW9uKSkge1xuICAgICAgICAgICAgJHdpbmRvdy5iaW5kKFwicGFnZXNob3dcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQub3JpZ2luYWxFdmVudCAmJiBldmVudC5vcmlnaW5hbEV2ZW50LnBlcnNpc3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKFwiYXBwZWFyXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIEZvcmNlIGluaXRpYWwgY2hlY2sgaWYgaW1hZ2VzIHNob3VsZCBhcHBlYXIuICovXG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKiBDb252ZW5pZW5jZSBtZXRob2RzIGluIGpRdWVyeSBuYW1lc3BhY2UuICAgICAgICAgICAqL1xuICAgIC8qIFVzZSBhcyAgJC5iZWxvd3RoZWZvbGQoZWxlbWVudCwge3RocmVzaG9sZCA6IDEwMCwgY29udGFpbmVyIDogd2luZG93fSkgKi9cblxuICAgICQuYmVsb3d0aGVmb2xkID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICAgICAgdmFyIGZvbGQ7XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XG4gICAgICAgICAgICBmb2xkID0gKHdpbmRvdy5pbm5lckhlaWdodCA/IHdpbmRvdy5pbm5lckhlaWdodCA6ICR3aW5kb3cuaGVpZ2h0KCkpICsgJHdpbmRvdy5zY3JvbGxUb3AoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvbGQgPSAkKHNldHRpbmdzLmNvbnRhaW5lcikub2Zmc2V0KCkudG9wICsgJChzZXR0aW5ncy5jb250YWluZXIpLmhlaWdodCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZvbGQgPD0gJChlbGVtZW50KS5vZmZzZXQoKS50b3AgLSBzZXR0aW5ncy50aHJlc2hvbGQ7XG4gICAgfTtcblxuICAgICQucmlnaHRvZmZvbGQgPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xuICAgICAgICB2YXIgZm9sZDtcblxuICAgICAgICBpZiAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHwgc2V0dGluZ3MuY29udGFpbmVyID09PSB3aW5kb3cpIHtcbiAgICAgICAgICAgIGZvbGQgPSAkd2luZG93LndpZHRoKCkgKyAkd2luZG93LnNjcm9sbExlZnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvbGQgPSAkKHNldHRpbmdzLmNvbnRhaW5lcikub2Zmc2V0KCkubGVmdCArICQoc2V0dGluZ3MuY29udGFpbmVyKS53aWR0aCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZvbGQgPD0gJChlbGVtZW50KS5vZmZzZXQoKS5sZWZ0IC0gc2V0dGluZ3MudGhyZXNob2xkO1xuICAgIH07XG5cbiAgICAkLmFib3ZldGhldG9wID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICAgICAgdmFyIGZvbGQ7XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XG4gICAgICAgICAgICBmb2xkID0gJHdpbmRvdy5zY3JvbGxUb3AoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvbGQgPSAkKHNldHRpbmdzLmNvbnRhaW5lcikub2Zmc2V0KCkudG9wO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZvbGQgPj0gJChlbGVtZW50KS5vZmZzZXQoKS50b3AgKyBzZXR0aW5ncy50aHJlc2hvbGQgKyAkKGVsZW1lbnQpLmhlaWdodCgpO1xuICAgIH07XG5cbiAgICAkLmxlZnRvZmJlZ2luID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICAgICAgdmFyIGZvbGQ7XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XG4gICAgICAgICAgICBmb2xkID0gJHdpbmRvdy5zY3JvbGxMZWZ0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLmxlZnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm9sZCA+PSAkKGVsZW1lbnQpLm9mZnNldCgpLmxlZnQgKyBzZXR0aW5ncy50aHJlc2hvbGQgKyAkKGVsZW1lbnQpLndpZHRoKCk7XG4gICAgfTtcblxuICAgICQuaW52aWV3cG9ydCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG5cbiAgICAgICAgcmV0dXJuICEkLnJpZ2h0b2Zmb2xkKGVsZW1lbnQsIHNldHRpbmdzKSAmJiAhJC5sZWZ0b2ZiZWdpbihlbGVtZW50LCBzZXR0aW5ncykgJiZcbiAgICAgICAgICAgICEkLmJlbG93dGhlZm9sZChlbGVtZW50LCBzZXR0aW5ncykgJiYgISQuYWJvdmV0aGV0b3AoZWxlbWVudCwgc2V0dGluZ3MpO1xuICAgIH07XG5cbiAgICAvKiBDdXN0b20gc2VsZWN0b3JzIGZvciB5b3VyIGNvbnZlbmllbmNlLiAgICovXG4gICAgLyogVXNlIGFzICQoXCJpbWc6YmVsb3ctdGhlLWZvbGRcIikuc29tZXRoaW5nKCkgb3IgKi9cbiAgICAvKiAkKFwiaW1nXCIpLmZpbHRlcihcIjpiZWxvdy10aGUtZm9sZFwiKS5zb21ldGhpbmcoKSB3aGljaCBpcyBmYXN0ZXIgKi9cblxuICAgICQuZXh0ZW5kKCQuZXhwcltcIjpcIl0sIHtcbiAgICAgICAgXCJiZWxvdy10aGUtZm9sZFwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gJC5iZWxvd3RoZWZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwiYWJvdmUtdGhlLXRvcFwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gISQuYmVsb3d0aGVmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcInJpZ2h0LW9mLXNjcmVlblwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gJC5yaWdodG9mZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJsZWZ0LW9mLXNjcmVlblwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gISQucmlnaHRvZmZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwiaW4tdmlld3BvcnRcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICQuaW52aWV3cG9ydChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyogTWFpbnRhaW4gQkMgZm9yIGNvdXBsZSBvZiB2ZXJzaW9ucy4gKi9cbiAgICAgICAgXCJhYm92ZS10aGUtZm9sZFwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gISQuYmVsb3d0aGVmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcInJpZ2h0LW9mLWZvbGRcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICQucmlnaHRvZmZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwibGVmdC1vZi1mb2xkXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAhJC5yaWdodG9mZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgR2VuZXJhbC5pbml0KCk7XG4gICAgSW1hZ2VTbWFydExvYWRlci5pbml0KCk7XG4gICAgaWYgKCQoJ2JvZHknKS5oYXNDbGFzcygncG9zdC10ZW1wbGF0ZScpKSB7XG4gICAgICAgIEdlbmVyYWwuYWRkSWNvbnMoKTtcbiAgICAgICAgR2VuZXJhbC5jb21tZW50TG9hZGVyKCk7XG5cbiAgICB9XG5cbn0pIl19
